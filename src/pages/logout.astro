---
// src/pages/logout.astro
import PublicLayout from '@layouts/PublicLayout.astro';
---

<PublicLayout>
  <slot name="title" slot="title">Cerrando Sesión - Copa Litoral</slot>
  <slot name="description" slot="description">Cerrando sesión en el panel de administración</slot>
  
  <div class="max-w-md mx-auto mt-12 text-center">
    <h1 class="text-3xl font-bold mb-6 text-primary">Cerrando Sesión</h1>
    <p class="mb-4">Por favor espera mientras cerramos tu sesión...</p>
    <div class="spinner"></div>
  </div>
  
  <script>
    // Perform logout
    fetch('/api/auth/logout', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => {
      if (response.ok) {
        window.location.href = '/login';
      } else {
        alert('Error al cerrar sesión');
        window.location.href = '/';
      }
    })
    .catch(error => {
      alert('Error de conexión: ' + error.message);
      window.location.href = '/';
    });
  </script>
  
  <style>
    .spinner {
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-left-color: var(--primary);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</PublicLayout>
